# Webサービス公開前チェックリスト

このドキュメントは、ポートフォリオサイトのリリース前に確認すべきセキュリティ、パフォーマンス、アクセシビリティなどの重要項目をまとめたものです。

## 🔐 セキュリティ

### 認証に関わるCookieの属性
- [ ] HttpOnly属性が設定されていること（XSS緩和策）
- [ ] SameSite属性がLaxもしくはStrictになっていること（CSRF対策）
- [ ] Secure属性が設定されていること（HTTPS通信のみ）
- [ ] Cookie名に`__Host-`プレフィックスを使用（より安全）

### ユーザーの入力値のバリデーション
- [ ] バリデーションがサーバーサイド（Hono API）でも実装されていること
- [ ] お問い合わせフォームのメッセージに危険な文字列が含まれないこと
- [ ] SQLインジェクション対策（Prisma/D1の使用で基本的に安全）

### レスポンスヘッダ
- [ ] `Strict-Transport-Security`ヘッダーの設定
  ```
  max-age=31536000; includeSubDomains; preload
  ```
- [ ] `X-Frame-Options: DENY`または`SAMEORIGIN`の設定
- [ ] `X-Content-Type-Options: nosniff`の設定
- [ ] CSP（Content-Security-Policy）の設定を検討

### その他セキュリティ
- [ ] Cloudflare R2のディレクトリリスティングが無効になっていること
- [ ] エラーメッセージにセンシティブな情報が含まれていないこと
- [ ] D1データベースの定期バックアップが有効
- [ ] Cloudflareアカウントで二要素認証が有効
- [ ] 環境変数にシークレット情報が適切に保存されていること

## 📧 メール送信

### お問い合わせ機能
- [ ] スパム対策が実装されていること（実装済み）
- [ ] レート制限が適切に設定されていること（実装済み）
- [ ] メール送信時のSPF/DKIM/DMARC設定（Slack通知の場合は不要）

## 🔍 SEO

### 基本設定
- [ ] 全ページで`<title>`タグが適切に設定されていること
- [ ] canonical URLの設定（ブログ記事ページで重要）
- [ ] エラーページ（404、500）が適切なステータスコードを返すこと
- [ ] サイト全体にnoindexが付与されていないこと（リリース時確認）
- [ ] `<html lang="ja">`が設定されていること

### 動的コンテンツ
- [ ] ブログ記事のXMLサイトマップ生成
- [ ] meta descriptionの適切な設定
- [ ] 構造化データ（JSON-LD）の実装を検討

## 🎨 OGP

### 必須設定
- [ ] `og:title`
- [ ] `og:description`
- [ ] `og:url`
- [ ] `og:image`（1200x630px推奨）
- [ ] `twitter:card`（summary_large_image推奨）

### 実装対象ページ
- [ ] トップページ
- [ ] ブログ記事詳細ページ
- [ ] Worksページ

## ♿ アクセシビリティ

### 基本対応
- [ ] 画像の`alt`属性が適切に設定されていること
- [ ] アイコンボタンに`aria-label`が設定されていること
- [ ] キーボード操作に対応していること
- [ ] フォーカスインジケーターが見えること

## ⚡ パフォーマンス

### バンドルサイズ
- [ ] 不要なモジュールが含まれていないこと（bundle-analyzerで確認）
- [ ] 静的ファイルがCDNにキャッシュされていること
- [ ] 画像の最適化（Next.js Image使用）
- [ ] フォントの最適化（Next.js Font使用推奨）

### Core Web Vitals
- [ ] 画像によるレイアウトシフトが起きないこと（aspect-ratio設定）
- [ ] 必要以上に大きな画像が読み込まれていないこと

### データベース
- [ ] SQLのインデックスが適切に設定されていること
- [ ] N+1問題が発生していないこと

## 📱 複数環境での動作確認

### レスポンシブデザイン
- [ ] スマートフォン（iPhone/Android）
- [ ] タブレット（iPad）
- [ ] デスクトップ（各種解像度）

### ブラウザ対応
- [ ] Chrome（最新版）
- [ ] Safari（最新版）
- [ ] Firefox（最新版）
- [ ] Edge（最新版）

### OS別確認
- [ ] macOSでのフォント表示
- [ ] Windowsでのフォント表示
- [ ] スクロールバー常時表示での表示確認

## 🚀 リリース前の最終確認

### 基本設定
- [ ] ファビコンが設定されていること
- [ ] apple-touch-iconが設置されていること
- [ ] Google Analytics等の解析ツール設定
- [ ] エラー監視ツールの設定（Sentry等）

### 外部サービス連携
- [ ] Notion APIの本番設定
- [ ] GitHub APIの本番設定
- [ ] WakaTime APIの本番設定（必要な場合）

### セキュリティ最終確認
- [ ] 本番環境の環境変数が正しく設定されていること
- [ ] 開発用のデバッグ機能が無効になっていること
- [ ] レート制限が本番用に調整されていること

## 📝 実装時の注意点

### Cloudflare Workers特有の対応
- [ ] 環境変数は`.dev.vars`（開発）とWrangler設定（本番）で管理
- [ ] KVの名前空間が正しく設定されていること
- [ ] D1データベースのマイグレーションが完了していること

### Next.js特有の対応
- [ ] 環境変数の`NEXT_PUBLIC_`プレフィックス使用
- [ ] ISR/SSGの使い分けが適切であること
- [ ] API Routesのセキュリティ設定

## 🔄 継続的な改善

### リリース後の監視
- [ ] エラー率の監視
- [ ] パフォーマンスメトリクスの監視
- [ ] セキュリティアラートの設定

### 定期メンテナンス
- [ ] 依存関係の脆弱性チェック（Dependabot）
- [ ] ライブラリのアップデート
- [ ] バックアップの定期確認

---

このチェックリストは継続的に更新し、リリース前に必ず確認すること。